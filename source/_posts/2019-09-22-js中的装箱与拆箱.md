---
title: js中的装箱与拆箱
tags:
  - js
  - 面试
copyright: true
permalink: 1
date: 2019-09-22 20:38:47
categories: js
description:
---



> 你若真见过那些强者打拼的样子，就一定会明白，那些人之所以能达到别人到不了的高度，全是因为他们吃过许多别人吃不了的苦。这世上从来就没有横空出世的运气，只有不为人知的努力。



<!-- more -->

## 一. `1.toString()` 报错原因分析

> 对象.属性  进行方法调用
>
> 浏览器不能直接识别 `js` 脚本语言，必须通过编译器编译成浏览器可识别的语言，而 `1.` 和 `.5` 会被浏览器认为是 `Number` 类型的简写，而 `toString（）` 是对象上的方法，所以会报错。
>
> 解决方法：

## 二.装箱操作

> 基本类型转换为对应的对象类型，装箱分为隐式和显示

```js
 var num = 12345;
 var str = '12345';
 num.toFixed(2); // '12345.00'
 str.split(''); // ['1','2','3','4','5']
```

我们在两个基本类型的值上调用方法，而在 JavaScript 中只有 Object 类型才有方法，上面的代码就是js中装箱操作的具体体现了，下面我们来分析一下。

**1.隐式装箱**
在基本类型上调用方法时，会先创建一个该基本类型所对应的对象，然后在这个对象上调用方法。这个基本类型的对象是临时的，它只存在于方法调用那一行代码执行的瞬间，执行方法后立刻被销毁。具体到代码如下：

```js
    num.toFixed(2); // '12345.00'
//上方代码的真正步骤为
    var c = new Number(12345);
    c.toFixed(2);
    c = null;
```

当我们访问 num 时，要从内存中读取这个数字的值，此时会进行三步处理：

1. 创建一个 Number 类型的实例。
2. 在实例上调用方法。
3. 销毁实例。

**2.显式装箱**
通过内置对象 Boolean、Object、String 等可以对基本类型进行显示装箱。

```js
    var obj = new String('12345');
```

## 三. 拆箱操作

> 对象类型 =》 基本类型

```js
 var num = [1,2,3];
 var str = {
       name:'huahua'
 };
 console.log(num+1); //1,2,31
 String(str); //'[object Object]'
```

我们可以把两个 Object 类型的值当做基本类型的值直接使用